services:
  - type: web
    name: job-scanner
    env: python
    buildCommand: "pip install --upgrade pip && pip install -r requirements.txt"
    startCommand: "gunicorn -w 4 -k uvicorn.workers.UvicornWorker main:app --bind 0.0.0.0:$PORT"
    envVars:
      - key: RAPIDAPI_KEY        # Changed to match your API key variable
        sync: false
      - key: RAPIDAPI_HOST       # Added host variable for flexibility
        sync: false

  - type: web
    name: joblogy-frontend
    env: static
    staticPublishPath: frontend
    autoDeploy: true